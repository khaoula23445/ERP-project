<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="shortcut icon" href="assets/images/favicon.svg" type="image/x-icon" />
    <title>Liste des employees</title>
   
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <style>
      /* Basic styling for a clean, classy look */
      body {
        background-color: #f5f7fa;
        color: #333;
        font-family: Arial, sans-serif;
      }
      h3 {
        color: #ffffff;
        font-weight: bold;
      }
      .card-header {
          background-color: #3d71d2;
        color: #fff;
      }
      .card {
        margin-top: 20px;
        border: none;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      }
      .list-group-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 10px;
      }
      .form-label {
        color: #333;
        font-size: 0.9em;
        font-weight: 500;
        margin-right: 8px;
      }
      .form-control {
        font-size: 0.85em;
        padding: 0.25em 0.5em;
      }
      .btn-success {
        background-color: #00b25f;
        border: none;
        padding: 0.3em 0.7em;
        font-size: 0.85em;
      }
      .btn-danger {
        background-color: #ea2d40;
        border: none;
        padding: 0.3em 0.7em;
        font-size: 0.85em;
      }
      .card-header.bg-neutral {
        background-color: #3d71d2;
        color: hwb(0 99% 0%);
      }
    </style>
    <style>
         th span {
        font-weight: normal; /* Ensures the arrows are not bold */
        font-size: 14px; /* Adjust the size if necessary */
        margin-left: 5px; /* Adds some spacing between the column header and the arrow */
    }
      
      .details-row .version-details {
        padding: 10px; background: #f9f9f9; border-left: 3px solid #007bff;
      }
      
    </style>
  <style>
    .modal-content {
        width: 90%; /* Set the width of the modal */
        max-width: 1000px; /* Limit maximum width */
    }
   
    .form-label {
      color: #1A2142;;
    font-weight:500;
    font-size: smaller;
    display: block;
    text-align: left;
    margin-bottom: 5px;
    }

    

    .row.mb-3 {
        margin-bottom: 1rem; /* Reduced space to manage height */
    }
  
</style>
  </style>
    <!-- ========== All CSS files linkup ========= -->
    {% load static %}
<!-- Bootstrap JavaScript Bundle (includes Popper) -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" integrity="sha384-pprn3073KE6tl6oB8mMQIP1XumxWxF0VS+zY+Lsrl6hW6JARw/s8XKek5tP1Lcv7" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

    <link rel="stylesheet" href="{% static 'assets/css/bootstrap.min.css' %}" />
    <link rel="stylesheet" href="{% static 'assets/css/lineicons.css' %}" />
    <link rel="stylesheet" href="{% static 'assets/css/materialdesignicons.min.css' %}" />
    <link rel="stylesheet" href="{% static 'assets/css/fullcalendar.css' %}" />
    <link rel="stylesheet" href="{% static 'assets/css/main.css' %}" />
    <link rel="stylesheet" href="{% static 'assets/css/popup.css' %}" />
    <style>
      .dropdown-text {
    font-size: 13px; /* Change the font size as needed */
    padding: 0; /* Adjust padding if necessary */
    margin: 0; /* Adjust margin if necessary */
}

   .table thead th,
.table tbody td {
    text-align: center; /* Center-aligns text within <th> and <td> elements */
}

.table thead th h6 {
    margin: 0;
}
      .small-search {
  width: 200px;
}



        /* Center the toggle buttons in the middle of the page */
        .table-toggle-buttons {
          display: flex;
          justify-content: center;
          align-items: center;
          gap: 10px;
          margin-bottom: 20px;
        }
    
        .centered-wrapper {
          display: flex;
          justify-content: center;
          align-items: center;
          height: 100vh;
        }
    
        .custom-button {
          font-size: 14px;
          padding: 8px 16px;
        }
      </style>
  </head>
  <body>
    <!-- ======== Preloader =========== -->
    <div id="preloader">
      <div class="spinner"></div>
    </div>
    <!-- ======== Preloader =========== -->

    <!-- ======== sidebar-nav start =========== -->
    {% include 'HR/sidebar.html' %}
    <div class="overlay"></div>
    <!-- ======== sidebar-nav end =========== -->

    <main class="main-wrapper">
      <!-- ========== header start ========== -->
      {% include 'pages/header.html' %}
      <!-- ========== header end ========== -->

   
 
      <!-- ========== table components start ========== -->
      <section class="table-components">
        <div class="container-fluid">
          <div class="title-wrapper pt-30">
            <div class="row align-items-center">
              <div class="col-md-6">
                <div class="title">
                  <h2>Pointage</h2>
                </div>
              </div>
              <div class="col-md-6">
                <div class="breadcrumb-wrapper">
                  <nav aria-label="breadcrumb">
                    <ol class="breadcrumb">
                      <li class="breadcrumb-item">
                        <a href="#0">Dashboard</a>
                      </li>
                      <li class="breadcrumb-item active" aria-current="page">
                        Tables
                      </li>
                    </ol>
                  </nav>
                </div>
              </div>
            </div>
          </div>
          <div class="container my-5">
            
            <!-- Attendance Summary Section -->
            <div class="card" style="margin-top: -50px;">
              <div class="card-header " style="background-color: #ffffff;
;">
                <h6 style="color: #000000;">Attendance Summary</h6>
              </div>
              <div class="card-body row text-center">
                <div class="col-md-4">
                  <h6 class="text-success">Present</h6>
                  <p>{{ present_count }}</p>
                </div>
                <div class="col-md-4">
                  <h6 class="text-danger">Absent</h6>
                  <p>{{ absent_count }}</p>
                </div>
                <div class="col-md-4">
                  <h6 class="text-muted">Non-Pointed</h6>
                  <p>{{ non_pointed_count }}</p>
                </div>
              </div>
            </div>
        
            <!-- Non-Pointed Employees Section -->
            <div class="card">
              <div class="card-header " style="background-color: #d32f2f;">
                <h6 style="color: #f5f7fa;"> Les Employees non-pointe </h6>
              </div>
              <div class="card-body">
                {% if non_pointed_employees %}
                <ul class="list-group">
                  {% for record in non_pointed_employees %}
                  <li class="list-group-item">
                    <div class="mb-3">
                        <!-- Add margin-bottom to the name -->
                        <h6 class="mb-3">{{ record.employee_id.firstname }} {{ record.employee_id.lastname }}</h6>
                        
                        <!-- Add space between name and inputs -->
                        <form method="POST" action="{% url 'attendance_view' %}" class="d-inline" id="attendance-form-{{ record.idpointage }}">
                          {% csrf_token %}
                          <input type="hidden" name="pointage_id" value="{{ record.idpointage }}">
                      
                          <div class="d-flex align-items-center gap-3 mb-3">
                              <label class="form-label" for="check_in_{{ record.idpointage }}">DÃ©but:</label>
                              <input type="time" id="check_in_{{ record.idpointage }}" name="check_in_time" class="form-control w-25">
                      
                              <label class="form-label ms-2" for="check_out_{{ record.idpointage }}">Fin:</label>
                              <input type="time" id="check_out_{{ record.idpointage }}" name="check_out_time" class="form-control w-25" >
                      
                              <label class="form-label ms-2" for="overtime_{{ record.idpointage }}">Les heurs supplimentaire (hours):</label>
                              <input type="number" id="overtime_{{ record.idpointage }}" name="overtime_hours" step="0.01" class="form-control w-25">
                          </div>
                      
                          <div class="mt-2">
                              <button type="submit" name="status" value="present" class="btn btn-success mx-1" onclick="showCheckFields({{ record.idpointage }})">Present</button>
                              <button type="submit" name="status" value="absent" class="btn btn-danger" onclick="hideCheckFields({{ record.idpointage }})">Absent</button>
                          </div>
                      </form>
                      
                    </div>
                </li>
                
                  {% endfor %}
              </ul>
              
                {% else %}
                  <p class="text-muted">All employees have been marked for today.</p>
                {% endif %}
              </div>
            </div>
        
            <!-- Pointed Employees Section -->
            <div class="card">
              <div class="card-header bg-success text-white">
                  <h6 style="color: #f5f7fa;">Les Employees pointe</h6>
              </div>
              <div class="card-body">
                  {% if pointed_employees %}
                      <ul class="list-group">
                          {% for record in pointed_employees %}
                              <li class="list-group-item">
                                  <!-- Add space below the name -->
                                  <div class="mb-2">
                                      <strong>{{ record.employee_id.firstname }} {{ record.employee_id.lastname }}</strong>
                                  </div>
                                  
                                  <!-- Align the status and check-in/check-out details -->
                                  <div class="d-flex align-items-center gap-3">
                                      <span class="badge {% if record.status == 'present' %}bg-success{% else %}bg-danger{% endif %}">
                                          {{ record.status|title }}
                                      </span>
                                      {% if record.status == 'present' %}
                                          <small class="text-muted">
                                              Debut: {{ record.check_in_time }}, Fin: {{ record.check_out_time }}
                                          </small>
                                      {% endif %}
                                  </div>
                              </li>
                          {% endfor %}
                      </ul>
                  {% else %}
                      <p class="text-muted">No employees have been marked yet today.</p>
                  {% endif %}
              </div>
          </div>
          
          </div>
      

       
        </div>
      </section>
      
      <!-- ========== table components end ========== -->

      <!-- ========== footer start =========== -->
  
      <!-- ========== footer end =========== -->
    </main>
    <!-- ======== main-wrapper end =========== -->

    <!-- ========= All Javascript files linkup ======== -->

    <script src="{% static 'assets/js/bootstrap.bundle.min.js' %}"></script>
    <script src="{% static 'assets/js/Chart.min.js' %}"></script>
    <script src="{% static 'assets/js/dynamic-pie-chart.js' %}"></script>
    <script src="{% static 'assets/js/moment.min.js' %}"></script>
    <script src="{% static 'assets/js/fullcalendar.js' %}"></script>
    <script src="{% static 'assets/js/jvectormap.min.js' %}"></script>
    <script src="{% static 'assets/js/world-merc.js' %}"></script>
    <script src="{% static 'assets/js/polyfill.js' %}"></script>
    <script src="{% static 'assets/js/main.js' %}"></script>
    
  <!-- JavaScript (Bootstrap) -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
  </body>


</html>
